<!---

preview: default
default: preview
hideCode: true
skipValidation: true
teaserImage: '/static/samples/img/teaser/product_page.jpg'
author: aghassemi

--->

<!--
## Introduction

This sample showcases how to build a product page in AMP HTML.
-->
<!-- -->
<!doctype html>
<html âš¡ lang="en">
<head>
    <meta charset="utf-8">
  <title>Product Page</title>
    <meta name="amp-experiment-token" content="HfmyLgNLmblRg3Alqy164Vywr">
    <script async src="https://ampjs.org/v0.js"></script>

    <script async custom-element="amp-carousel" src="https://ampjs.org/v0/amp-carousel-0.1.js"></script>
    <script async custom-element="amp-list" src="https://ampjs.org/v0/amp-list-0.1.js"></script>
    <script async custom-template="amp-mustache" src="https://ampjs.org/v0/amp-mustache-0.2.js"></script>
    <script async custom-element="amp-social-share" src="https://ampjs.org/v0/amp-social-share-0.1.js"></script>
    <script async custom-element="amp-lightbox" src="https://ampjs.org/v0/amp-lightbox-0.1.js"></script>
    <script async custom-element="amp-image-lightbox" src="https://ampjs.org/v0/amp-image-lightbox-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://ampjs.org/v0/amp-youtube-0.1.js"></script>
    <script async custom-element="amp-form" src="https://ampjs.org/v0/amp-form-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://ampjs.org/v0/amp-sidebar-0.1.js"></script>
    <script async custom-element="amp-selector" src="https://ampjs.org/v0/amp-selector-0.1.js"></script>
    <script async custom-element="amp-analytics" src="https://ampjs.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-bind" src="https://ampjs.org/v0/amp-bind-0.1.js"></script>

    <link rel="canonical" href="<% canonical %>">
    <meta name="viewport" content="width=device-width">
    <style amp-custom>
    :root {
      --color-primary: #005AF0;
      --color-secondary: #00DCC0;
      --color-text-light: #fff;
      --color-text-dark: #000;
      --color-bg-light: #FAFAFC;
      --color-bg-grey: rgba(0,0,0,0.8);

      --space-1: .5rem;  /* 8px */
      --space-2: 1rem;   /* 16px */
      --space-3: 1.5rem; /* 24px */
      --space-4: 2rem;   /* 32px */
      --box-shadow-1: 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 1px -1px rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);
    }

    article#preview {
      background-color: var(--color-bg-light);
    }

    amp-carousel {
      margin:0
    }

    .header {
      position:relative;
      box-shadow: var(--box-shadow-1);
      padding-top:52px;
      background-color: var(--color-secondary);
    }

    .header #sample-menu {
      position:absolute;
      top:0;
      left:0;
      font-size:18px;
      font-weight:700;
      color: var(--color-text-light);
      text-transform:uppercase;
      padding:13px;
    }

    .header #sample-logo {
      position:absolute;
      top:0;
      left:36px;
      font-size:18px;
      font-weight:400;
      color:var(--color-text-light);
      text-transform:uppercase;
      margin:0 var(--space-2);
      height:var(--space-4);
      text-decoration:none;
      line-height:52px
    }

    .header form {
      padding:0
    }

    .header input::-webkit-search-decoration,.header input::-webkit-search-cancel-button {
      display:none
    }

    .header input[type=submit] {
      position:absolute;
      top:10px;
      right:var(--space-1);
      background-color:var(--color-primary);
      background-position:center;
      background-repeat:no-repeat;
      background-image:-webkit-image-set(url(/static/samples/img/ic_search_white_1x_web_24dp.png) 1x,url(/static/samples/img/ic_search_white_2x_web_24dp.png) 2x);
      border:0;
      height:var(--space-4);
      width:36px;
      -webkit-appearance:none;
      border-radius:4px 0
    }

    .header input[type=search],.header input[type=text] {
      position:absolute;
      top:10px;
      right:var(--space-3);
      background:var(--color-bg-light);
      padding:0 var(--space-1);
      width:20vw;
      height:var(--space-4);
      font-family:inherit;
      font-size:100%;
      border:solid 0 var(--color-primary);
      border-radius:4px 0;
      transition:all .9s ease
    }

    .header input[type=search]:focus,.header input[type=text]:focus {
      width:80vw;
      max-width:700px;
      background-color:var(--color-text-light);
      border-color:var(--color-primary);
      box-shadow:var(--box-shadow-1);
      outline:none
    }

    .header input:-moz-placeholder,.header input::-webkit-input-placeholder {
      color:var(--color-bg-light);
    }

    .header input:focus + #sample-logo {
      visibility:hidden;
      opacity:0;
      transition:visibility 0 0.7s,opacity .7s ease
    }

    .header input + #sample-logo {
      visibility:visible;
      opacity:1;
      transition:opacity 1.5s ease
    }

    @media (min-width: 600px) {
      .header input[type=search] {
        width:100px
      }

      .header input[type=search]:focus {
        width:600px
      }
    }

    .items,amp-list.items > div {
      display:flex;
      justify-content:space-around;
      flex-wrap:wrap
    }

    .item {
      flex-grow:1;
      flex-shrink:1
    }

    .tile {
      background-color:var(--color-text-light);
      width:120px;
      height:200px;
      display:block;
      margin:var(--space-1);
      -webkit-tap-highlight-color:var(--color-bg-light);
      max-width:200px
    }

    @media (max-width: 500px) {
      .items .tile {
        width:150px;
        height:200px
      }
    }

    .tile:active {
      background-color:var(--color-bg-light);
    }

    .tile p {
      margin:0;
      padding:0 var(--space-1);
      font-size:var(--space-2);
      line-height:20px
    }

    .tile .name {
      margin-top:var(--space-1);
    }

    .tile .price {
      margin-bottom:var(--space-1);
    }

    .tile .price,.tile .star {
      color:var(--color-text-dark);
    }

    #product-description {
      clear: both;
    }

    amp-lightbox {
      background: rgba(0,0,0,0.8);
      width: 100%;
      height: 100%;
      position: absolute;
    }
    amp-accordion h4 {
      font-size: 18px;
    }
    amp-carousel .selected {
      border: solid 2px red;
    }
    .amp-youtube-container {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
    }
    .video {
      flex: 1;
    }
    .price-description {
      color: grey;
      font-weight: 400;
      margin-top: 24px;
      margin-bottom: 16px;
      padding: 0 16px;
    }
    .product-gallery > ul {
      margin: 0;
      padding: 0;
      float: left;
      list-style: none;
      line-height: 0;
    }
    .product-gallery > ul > li {
      cursor: pointer;
      margin: 0 1em 1em 1em;
      opacity: 1;
      will-change: opacity;
      transition: all 0.3s cubic-bezier(.25,.8,.25,1);
    }
    .product-gallery > ul > li:active {
      opacity: 0.5;
    }
    .product-gallery > ul > li:focus {
      outline: none;
    }
    .product-gallery amp-img:focus {
      outline: none;
    }
    form#order label {
      display: inline;
      font-weight: 500;
      font-size: 16px;
      margin: 0;
    }
    form#order .button {
      width: 100%;
      max-width: 400px;
      align-self: center;
      margin: 16px 20%;
      box-sizing: border-box;
    }
    form#order.amp-form-submitting [name=add-to-cart] {
      color: #666;
      background-color: #aaa;
      cursor: default;
    }
    form#order amp-selector > ul {
      list-style: none;
      display: flex;
      align-items: flex-end;
      justify-content: end;
    }
    form#order amp-selector > ul li {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 8px;
      background: white;
      height: 40px;
      min-width: 40px;
      width: auto;
    }
    form#order amp-selector [option] {
      outline: none;
    }
    form#order amp-selector amp-img[option][selected] {
      outline-width: 1px;
      outline-style: solid;
      outline-color: #eb407a;
      background: none;
    }
    form#order amp-selector:not([disabled]) [option][selected]:not([disabled]), amp-img.selected {
      will-change: box-shadow;
      box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
      transition: box-shadow 0.3s cubic-bezier(.25,.8,.25,1);
      color: #fff;
    }

    form#order amp-selector:not([disabled]) [option][selected]:not([disabled]):not(.unavailable):not(.square) {
      background-color: #eb407a;
    }

    form#order amp-selector:not([disabled]) [option][selected]:not([disabled]):not(.unavailable).square {
      outline: 1px solid #eb407a;
    }

    form#order amp-selector:not([disabled]) [option]:not([selected]):not([disabled]), amp-img:not([.selected]) {
      will-change: box-shadow;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      transition: box-shadow 0.3s cubic-bezier(.25,.8,.25,1);
    }

    form#order amp-selector[name=color] div:not([selected]):not([disabled]) {
      opacity: 0.6;
    }

    /* global style in order to bind global style in the iframe */

    html, body {
      font-size: 16px;
      font-family: 'Noto Sans', sans-serif;
      color: #48525C;
    }
    p {
      line-height: 1.6rem;
    }
    a {
      font-weight: bold;
      text-decoration: none;
      color: #005AF0;
    }
    .tabButton.h4.ampstart-nav-item {
      text-align: center;
      padding: 0.5rem;
    }
    .ampstart-btn {
      margin-top: 1.5rem;
      margin-bottom: .75em;
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      line-height: 1.2em;
      font-size: 1em;
      color: #fff;
      display: inline-block;
      padding: 0.75em 1.75em;
      border-radius: 3px;
      background-color: #005AF0;
      border: none;
      cursor: pointer;
      box-shadow: 0 15px 35px -5px rgba(0,0,0,0.25);
      transition: transform 0.3s cubic-bezier(0.25, 0.1, 0.25, 1),box-shadow 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
    }
    p.name + p.star {
      color: gold;
    }
    button.info-button {
      border: none;
    }
    @keyframes fadeIn {
      0% {opacity: 0;}
      100% {opacity: 1;}
    }
    .fadeIn {
      animation-duration: 1s;
      animation-fill-mode: both;
      animation-name: fadeIn;
    }

    .unavailable {
      position: relative;
      background: gray;
      overflow: hidden;
      opacity: 0.6;
      pointer-events: none;
      user-select: none;
    }

    .unavailable:before, .unavailable:after {
      position: absolute;
      content: '';
      background: grey;
      display: block;
      width: auto;
      height: 1px;
      min-width: 56px;
      -webkit-transform: rotate(-45deg);
      transform: rotate(-45deg);
      left: -11px;
      right: 0;
      top: 0;
      bottom: 0;
      margin: auto;
      border-bottom: 2px solid;
    }

    .unavailable:after {
        -webkit-transform: rotate(45deg);
        transform: rotate(45deg);
    }

    div.square {
      width: 40px;
      height: 40px;
    }

    .green {
      background-color: #008000;
    }

    .red {
      background-color: #FF0000;
    }

    .golden {
      background-color: #DAA520;
    }

    @media (max-width: 1024px) {
      .product-gallery > ul {
        display: none;
      }
    }
    .info-button {
      background: -webkit-image-set(
        url(/static/samples/img/ic_info_outline_black_24dp_1x.png) 1x,
        url(/static/samples/img/ic_info_outline_black_24dp_2x.png) 2x
      );
      background-repeat: no-repeat;
      width: 24px;
      height: 24px;
      margin-top: 4px;
    }

    .info {
      margin: 0 auto;
      background: #fff;
    }

    .lightbox {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
    }

    .ampTabContainer {
        display: flex;
        flex-wrap: wrap;
    }

    .tabButton {
        list-style: none;
        text-align: center;
        cursor: pointer;
        outline: none;
    }

    amp-selector [option][selected] {
      outline: #fff;
    }

    .tabContent {
        line-height: 1.5rem;
        display: none;
        width: 100%;
        order: 1; /* must be greater than the order of the tab buttons to flex to the next line */
    }

    .tabButton[selected]::after {
      content: '';
      display: block;
      height: 4px;
      background: linear-gradient(90deg,#94103e 0,#db004d);
    }

    .tabButton[selected]+.tabContent {
        display: block;
    }

    .items, amp-list.items > div {
      justify-content: flex-start;
    }

    .close-gallery-button {
      z-index: 1;
      position: absolute;
      right: 0;
    }

    </style>

    <!-- ## Metadata -->
    <!-- The page indexing requires schema.org markup for one of the following types: Type, AggregateRating, Offers. [Learn more](https://developers.google.com/structured-data/carousels/top-stories#markup_specification). -->
    <script type="application/ld+json">
    {
        "@context": "http://schema.org/",
        "@type": "Product",
        "name": "Apple",
        "image": "https://amp.dev/static/samples/img/golden_apple1_1024x682.jpg",
        "description": "Lorem ipsum",
        "mpn": "925872",
        "brand": {
            "@type": "Fruit",
            "name": "Apple"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.4",
            "reviewCount": "88"
        },
        "offers": {
            "@type": "Offer",
            "priceCurrency": "USD",
            "price": "1.99",
            "priceValidUntil": "2020-11-05",
            "itemCondition": "http://schema.org/UsedCondition",
            "availability": "http://schema.org/InStock",
            "seller": {
                "@type": "Retail",
                "name": "AMP by Example"
            }
        }
    }
    </script>

    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    </head>
    <body>

      <!-- ## Navigation -->
      <!-- Use the [amp-sidebar](/documentation/components/amp-sidebar) component to give customers the chance to quickly jump to any of your product categories.-->
      <amp-sidebar id="drawermenu" layout="nodisplay">
        <a href="/" class="caps text-decoration-none block p1">Products</a>
        <hr/>
        <a class="caps text-decoration-none block p1" href="/samples_templates/product_browse_page/preview/">Fruit</a>
        <a class="caps text-decoration-none block p1" href="/samples_templates/product_browse_page/preview/">Vegetable</a>
        <a class="caps text-decoration-none block p1" href="/samples_templates/product_browse_page/preview/">More</a>
      </amp-sidebar>
      <!-- ## Header with Search -->
      <!-- AMP supports forms, which means you can directly integrate a product search into your AMPs. Try searching for "Apple".-->
      <!-- You can use CSS3 animations to enrich your page. The expanding text field when the search box is focused is implemented with CSS only.-->
      <div class="header">
        <a id="sample-menu" on="tap:drawermenu.toggle">
          <amp-img srcset="/static/samples/img/ic_menu_white_1x_web_24dp.png 1x, /static/samples/img/ic_menu_white_2x_web_24dp.png 2x"
                  width="24" height="24"
                  alt="navigation"></amp-img>
        </a>
        <form method="GET" action="/documentation/examples/api/search" target="_top">
          <input name="search" type="search" placeholder="Search">
          <a id="sample-logo" href="/">Product</a>
          <input type="submit" value="">
        </form>
      </div>

      <h2 class="m1">Apple</h2>

      <!-- ## Social Sharing -->
      <!-- The Social Share extension provides a common interface for share buttons. Learn more about `amp-social-share` [here](/documentation/components/amp-social-share). -->
      <div class="m1">
        <amp-social-share type="twitter"
                          width="30"
                          height="22"></amp-social-share>
        <amp-social-share type="facebook"
                          width="30"
                          height="22"
                          data-attribution="254325784911610"></amp-social-share>
        <amp-social-share type="email"
                          width="30"
                          height="22"></amp-social-share>
        <amp-social-share type="pinterest"
                          width="33"
                          height="22"></amp-social-share>
      </div>

      <p id="product-description" class="m1">Lorem ipsum dolor sit amet, ut sed non vel mattis. Et nulla suscipit ante ligula nisl in. Ut venenatis et mauris, mauris porta vulputate tellus mauris integer facilisis.</p>
      <!-- ## Video -->
      <!-- AMP supports a wide range of video platforms. Here we are using `amp-youtube` to show a product video. You can find an overview of all supported video platforms [here](/advanced/integrating_videos_in_amp_an_overview/).-->
      <!-- In this sample we don't embed the video directly into the page, but instead show it in a lightbox using the `amp-lightbox` component. Learn more about `amp-lightbox` [here](/documentation/components/reference/amp-lightbox.html).-->

      <button class="ampstart-btn caps m1 mb3" on="tap:watch-video-lightbox" >
        Show Video
      </button>

      <amp-lightbox id="watch-video-lightbox" layout="nodisplay">
        <div class="amp-youtube-container">
          <div class="video">
            <a on="tap:watch-video-lightbox.close" role="button" tabindex="0">
              Close
            </a>
            <amp-youtube width="480" height="270"
                                     layout="responsive"
                                     data-videoid="lBTCB7yLs8Y">
            </amp-youtube>
          </div>
        </div>
      </amp-lightbox>
    <!-- ## Slides preview Gallery -->
    <!--On desktop we've added a film strip like slide preview. Each product colour has its own image gallery and slide preview.
    We use [amp-bind](/content/amp-dev/documentation/components/reference/amp-bind-v0.1.md) to update the page selecting the gallery and image preview
    corresponding to the selected colour. We realized the color selection by using `amp-selector`. Find more the doc and info in The Product Page section below.

    The green colour is the default color for the gallery when the page loads.
    Clicking on a preview image will reveal the image in the gallery via the tap action `on="tap:AMP.setState({product: {selectedSlideForGreen: 0}})"`.

    See below for more informations on how we use `amp-bind` . -->
  <div class="product-gallery">
    <ul [hidden]="product.selectedColor != 'green'">
      <li>
        <amp-img on="tap:AMP.setState({product: {selectedSlideForGreen: 0}})"
                  src="/static/samples/img/green_apple_1_60x40.jpg"
                  width="60" height="40"
                  class="selected"
                  [class]="product.selectedSlideForGreen == 0 ? 'selected' : '' "
                  tabindex="0" role="button">
        </amp-img>
      </li>
      <li>
        <amp-img on="tap:AMP.setState({product: {selectedSlideForGreen: 1}})"
                  src="/static/samples/img/green_apple_2_60x40.jpg"
                  width="60" height="40"
                  [class]="product.selectedSlideForGreen == 1 ? 'selected' : '' "
                  tabindex="1" role="button">
        </amp-img>
      </li>
    </ul>

    <ul hidden [hidden]="product.selectedColor != 'golden'">
      <li>
        <amp-img on="tap:AMP.setState({product: {selectedSlideForGolden: 0}})"
                src="/static/samples/img/product1_alt1_60x40.jpg"
                 width="60" height="40"
                 class="selected fadeIn"
                 [class]="product.selectedSlideForGolden == 0 ? 'selected fadeIn' : '' "
                 tabindex="0" role="button">
        </amp-img>
      </li>
    </ul>

    <ul hidden [hidden]="product.selectedColor != 'red'">
      <li>
        <amp-img on="tap:AMP.setState({ product: {selectedSlideForRed : 0}})"
                 src="/static/samples/static/samples/img/red_apple_1_60x40.jpg"
                 width="60" height="40"
                 class="selected fadeIn"
                 [class]="product.selectedSlideForRed == 0 ? 'selected fadeIn' : '' "
                 tabindex="0" role="button">
        </amp-img>
      </li>
      <li>
        <amp-img on="tap:AMP.setState({ product: {selectedSlideForRed : 1}})"
                 src="/static/samples/static/samples/img/red_apple_2_60x46.jpg"
                 width="60" height="40"
                 [class]="product.selectedSlideForRed == 1 ? 'selected' : '' "
                 tabindex="1" role="button">
        </amp-img>
      </li>
    </ul>
  </div>
   <!-- ## Image Gallery -->
  <!-- The `amp-carousel` component works very well for product image galleries. Learn how the `amp-carousel` component works [here](/advanced/image_galleries_with_amp-carousel/).

  Notice how we are binding to the `slide` and `class` by using to the values of the variables `selectedSlideForGreen` and `selectedColor`. -->
  <div class="product-gallery">

    <amp-carousel id="green-apple-carousel"
            width="1024" height="682"
            layout="responsive"
            type="slides"
            [slide]="product.selectedSlideForGreen"
            on="slideChange: AMP.setState({product: {selectedSlideForGreen: event.index}})"
            class="fadeIn"
            [hidden]="product.selectedColor != 'green'">
      <amp-img src="/static/samples/img/green_apple_1_1024x682.jpg"
                width="1024" height="682"
                layout="responsive" on="tap:gallery-lightbox"
                role="button" tabindex="0">
      </amp-img>
      <amp-img src="/static/samples/img/green_apple_2_1024x685.jpg"
                width="1024" height="682"
                layout="responsive" on="tap:gallery-lightbox"
                role="button" tabindex="0">
      </amp-img>
    </amp-carousel>

    <amp-carousel id="golden-apple-carousel"
            width="1024" height="682"
            layout="responsive"
            type="slides"
            [slide]="product.selectedSlideForGolden"
            on="slideChange: AMP.setState({product: {selectedSlideForGolden: event.index}})"
            hidden
            class="fadeIn"
            [hidden]="product.selectedColor != 'golden'">
        <amp-img src="/static/samples/img/golden_apple1_1024x682.jpg"
                width="1024" height="682"
                layout="responsive" on="tap:gallery-lightbox"
                role="button" tabindex="0">
        </amp-img>
    </amp-carousel>

    <amp-carousel id="red-apple-carousel"
            width="1024" height="682"
            layout="responsive"
            type="slides"
            [slide]="product.selectedSlideForRed"
            on="slideChange: AMP.setState({product: {selectedSlideForRed: event.index}})"
            hidden
            class="fadeIn"
            [hidden]="product.selectedColor != 'red'">
        <amp-img src="/static/samples/img/red_apple_1_1024x682.jpg"
                width="1024" height="682"
                layout="responsive" on="tap:gallery-lightbox"
                role="button" tabindex="0">
        </amp-img>
        <amp-img src="/static/samples/img/red_apple_2_1024x793.jpg"
                width="1024" height="682"
                layout="responsive" on="tap:gallery-lightbox"
                role="button" tabindex="0">
        </amp-img>
    </amp-carousel>
  </div>
  <div class="product-gallery">

    <!-- ## Full screen image -->
    <!-- The `amp-image-lightbox` component allows the user to expand an image to fill the viewport.
    By clicking on each image from the product gallery, the user can see the product image by using the full screen.
    Learn more [here](/documentation/components/reference/amp-image-lightbox.html) -->
    <amp-image-lightbox id="gallery-lightbox" layout="nodisplay">
      <div on="tap:gallery-lightbox.close" role="button"
          tabindex="0">
          <button class="ampstart-btn caps m2 close-gallery-button" on="tap:gallery-lightbox.close"
            role="button" tabindex="0">
            Close
          </button>
      </div>
    </amp-image-lightbox>

  </div>
  <!-- ## Product Configuration -->
  <!-- We use the `amp-state` component (part of [amp-bind](/content/amp-dev/documentation/components/reference/amp-bind-v0.1.md))
      to configure the product price depending on the color and the size. We also configure the `defaultSize`
      for each product when you switch between colours and the size you previously selected is not available for the new color -->
  <amp-state id="product">
    <script type="application/json">
    {
      "selectedColor": "green",
      "selectedSize": "S",
      "selectedSlideForRed": 0,
      "selectedSlideForGolden": 0,
      "selectedSlideForGreen": 0,
      "moreItemsPageIndex": 0,
      "hasMorePages": true,
      "green": {
        "id": "1",
        "sizes": {
          "S": "$5.99",
          "M": "$5.99",
          "L": "unavailable"
        },
        "defaultSize": "S"
      },
      "golden": {
        "id": "2",
        "sizes": {
          "S": "$9.99",
          "M": "unavailable",
          "L": "$9.99"
        },
        "defaultSize": "L"
      },
      "red": {
        "id": "3",
        "sizes": {
          "S": "$7.99",
          "M": "$7.99",
          "L": "$7.99"
        },
        "defaultSize": "M"
      }
    }
    </script>
  </amp-state>

    <!-- ## Product price -->
    <!-- We use [amp-bind](/content/amp-dev/documentation/components/reference/amp-bind-v0.1.md) to update the price of the product
      depending on the selected colour.

    We bind the `text` attribute to the value of expression `product[product.selectedColor].sizes[product.selectedSize]`. `product` is the id `amp-state` json described in the Product Configuration section.

    <p>Notice how we set $1.99 value as the default for the price:  expressions
      will not be evaluated at the page load.</p>

    We use `amp-selector` together with `amp-bind` to update the page for showing the price, the size availability, the gallery and preview of images.
    Every time you select a color, we call `AMP.setState` with `{selectedColor: event.targetOption}`. This is triggering
    all the attributes and elements binded to `selectedColor` to update: the price (binded with the attribute `[text]`), the gallery, the image preview and the size selector (all binded with `[class]`). -->
      <p class="price-description">Price:
        <span [text]="product[product.selectedColor].sizes[product.selectedSize]">$5.99</span>
    </p>

    <!-- ## Product page <a name="add-to-cart-button"></a>-->
    <!-- The add-to-cart action action is implemented using  [amp-form](/documentation/components/reference/amp-form/). In our sample we use the [amp-selector](/components/amp-selector.html) for selecting different product properties.
    Pressing the `ADD TO CART` button adds the product to a shopping cart page using the properties you have selected. Notice that the button URL contains the query `clientId={{ClientId}}`.
    If an item is successfully added to the shopping cart, we redirect the user to the shopping cart page.
    The redirect target is configured via a header in the server's form response ([redirecting after submission](https://github.com/ampproject/amphtml/blob/main/extensions/amp-form/amp-form.md#redirecting-after-a-submission)):

      <p>access-control-expose-headers:AMP-Access-Control-Allow-Source-Origin,AMP-Redirect-To
      amp-redirect-to:<a href="http://ampbyexample.com/shopping_cart/?clientid=amp-123456789">http://ampbyexample.com/shopping_cart/?clientid=amp-123456789</a></p>
     -->

    <!-- We use the `CLIENT_ID` variable to identify the user, this enables storing a shopping cart between repeated visits of an AMP page (either via the AMP Cache or the original host). This variable can be used inside an amp-form by declaring an hidden input value with `default-value="CLIENT_ID(cart)`. Read more about variable substitution [here](https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-var-substitutions.md). -->

      <form id="order" method="POST"
            action-xhr="/documentation/examples/e-commerce/shopping_cart/add-to-cart"
            target="_top" class="flex flex-wrap m1">
        <div class="items-center flex">
          <label for="color">Color:</label>
          <amp-selector name="color"
                  layout="container"
                  [selected]="product.selectedColor"
                  on="select:AMP.setState({
                    product: {
                      selectedColor: event.targetOption,
                      selectedSlideForRed: 0,
                      selectedSlideForGreen: 0,
                      selectedSlideForYellow: 0,
                      selectedSize: product[event.targetOption].sizes[product.selectedSize] != 'unavailable' ? product.selectedSize : product[event.targetOption].defaultSize
                    }
                  })">
            <ul class="p0 m1">
              <li>
                <div option="green" selected class="square green"></div>
              </li>
              <li>
                <div option="golden" class="square golden"></div>
              </li>
              <li>
                <div option="red" class="square red"></div>
              </li>
            </ul>
          </amp-selector>
        </div>
        <div class="items-center flex">
          <label for="quantity">Quantity:</label>
          <amp-selector name="quantity" layout="container">
            <ul class="p0 m1">
              <li option="1" selected>1</li>
              <li option="2">2</li>
              <li option="3">3</li>
            </ul>
          </amp-selector>
        </div>
        <div class="items-center flex">
          <label for="size">Size:</label>
          <amp-selector name="size" layout="container"
                  on="select:AMP.setState({ product: {selectedSize: event.targetOption}})"
                  [selected]="(product[product.selectedColor].sizes[product.selectedSize] != 'unavailable')
                      ? product.selectedSize
                      : product[product.selectedColor].defaultSize">
            <ul class="p0 m1">
              <li option="S" class=""
                  [class]="(product[product.selectedColor].sizes['S'] != 'unavailable')
                      ? ''
                      : 'unavailable'">S</li>
              <li option="M" class="" selected
                  [class]="(product[product.selectedColor].sizes['M'] != 'unavailable')
                      ? ''
                      : 'unavailable'">M</li>
              <li option="L" class="unavailable"
                  [class]="(product[product.selectedColor].sizes['L'] != 'unavailable')
                      ? ''
                      : 'unavailable'">L</li>
            </ul>
          </amp-selector>
        </div>
        <div class="items-center flex my1">
          <input type="submit" class="ampstart-btn caps" name="add-to-cart" value="add to cart">
        </div>
        <input type="hidden" name="name" value="Apple">
        <input type="hidden" name="price" value="$1.99" [value]="product[product.selectedColor].sizes[product.selectedSize]">
        <input type="hidden" name="id" value="1" [value]="product[product.selectedColor].id">
        <input name="clientId" type="hidden" value="CLIENT_ID(cart)" data-amp-replace="CLIENT_ID">
        <div submit-error>
          <template type="amp-mustache">
            Error! Looks like something went wrong with your shopping cart, please try to add an item again. {{error}}
          </template>
        </div>
      </form>

    <!-- ## Tab panels -->
    <!-- Use `amp-selector` styled as tab panels to add additional data about your product.
    Learn how to implement tabs in AMP [here](/documentation/examples/style-layout/tab_panels_with_amp-selector/). -->
  <amp-selector role="tablist"
  layout="container"
  class="ampTabContainer ampstart-headerbar-nav" keyboard-select-mode="select">
  <div role="tab"
    class="tabButton h4 ampstart-nav-item"
    selected
    option="a">ABOUT</div>
  <div role="tabpanel"
      class="tabContent p1 p">Fruit is rich in vitamins and minerals. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
  <div role="tab"
    class="tabButton h4 ampstart-nav-item"
    option="b">SPECS</div>
  <div role="tabpanel"
    class="tabContent p1 p">Always wash fruit before eating. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
  <div role="tab"
      class="tabButton h4 ampstart-nav-item"
      option="c">SIZE</div>
  <div role="tabpanel"
      class="tabContent p1 p">Size may vary. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>
</amp-selector>

    <!-- ## Dynamic Related Product Lists -->
    <!--  -->
    <div class="items-center flex">
      <h2 id="related-products" class="m1 inline-block">Related products
      <amp-lightbox id="my-lightbox" layout="nodisplay">
        <div class="lightbox" on="tap:my-lightbox.close" role="button"
            tabindex="0">
          <div class="info">
            <h4 class="p2">Products that have been bought together</h4>
            <button class="ampstart-btn caps mx2 mb2" on="tap:my-lightbox.close"
              role="button" tabindex="0">
              Close
            </button>
        </div>
        </div>
      </amp-lightbox>
    </h2>
      <button class="info-button border-none mr1" on="tap:my-lightbox" role="button" tabindex="0">
      </button>
    </div>
    <!--
    With AMP, you can easily pull in different latest offers or highlights without changing the page. To do so, just use `amp-list` to fire a CORS request to a JSON endpoint which supplies the list of related products. These are populated into an amp-mustache template on the client.
    Learn more about `amp-list` [here](/documentation/components/amp-list).
    -->
    <amp-list class="items m1"
              width="auto"
              height="145"
              layout="fixed-height"
              src="/static/samples/json/related_products.json"
              [src]="myState.items"
              binding="no"
              id="show-more-list">
      <template type="amp-mustache">
        <a class="text-decoration-none p1"
          href="/documentation/examples/e-commerce/product_page/preview/">
          <amp-img width="70.31"
                   height="46.8"
                   layout="fixed"
                   alt="{{name}}"
                   src="{{img}}"></amp-img>
                 <p class="name">{{name}}</p>
                 <p class="star">{{{stars}}}</p>
                 <p class="price">${{price}}</p>
         </a>
      </template>
    </amp-list>
    <!--
    While infinite scrolling is not possible at the moment in AMP, you can use `amp-bind` to dynamically change the
    src of `amp-list` and add more items to the page.
    We bind the `src` attribute to the id of an `amp-state` component so that the `amp-list` will use the items
    from that component as a `src`. The `amp-state` initial value is set by setting the `src` value
    to the same endpoint used by `amp-list`. We append items to the `amp-state` everytime the user click on the Show more button, see below for more info.
    -->
    <amp-state id="myState" src="/static/samples/json/related_products.json">
    </amp-state>
    <!--
    You can show or hide a Show more button by using `amp-form` and the `submit-success` event: notice
    how we set the `hasMorePages` variable to false based on the server response.
    -->
    <form method="GET"
        action="/documentation/examples/api/json/more_related_products_page"
        action-xhr="/documentation/examples/api/json/more_related_products_page"
        target="_top"
        on="submit-success: AMP.setState({
          myState: { items: myState.items.concat(event.response.items)},
          product: {moreItemsPageIndex: product.moreItemsPageIndex + 1,
                    hasMorePages: event.response.hasMorePages}
        });">
      <input type="hidden" name="moreItemsPageIndex" value="0" [value]="product.moreItemsPageIndex">
      <input type="submit" value="Show more"
        class="ampstart-btn caps m1 mb3"
        [hidden] = "!product.hasMorePages">
  </form>
  <!--
    ## User Analytics
  -->
  <!--
    Analytics must be configured in the body. Here we use Google Analytics to track pageviews.
  -->
  <amp-analytics type="googleanalytics">
    <script type="application/json">
        {
          "vars": {
              "account": "UA-73836974-1"
          },
          "triggers": {
              "default pageview": {
                  "on": "visible",
                  "request": "pageview",
                  "vars": {
                      "title": "Product"
                  }
              }
          }
      }
    </script>
  </amp-analytics>
    </body>
</html>
